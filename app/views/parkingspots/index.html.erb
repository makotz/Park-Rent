<div class="container">
  <div class="box">
    <h1>Available Parking Spots</h1>
  </div>

  <% if !@parkingspots.empty? %>
    <div id='available_parkingspots' class="box col-sm-5">
      <% @parkingspots.each do |parkingspot| %>
        <%= link_to "#{parkingspot.title}", parkingspot_path(parkingspot) %> (<%= parkingspot.address %>)
        Price: $<%= parkingspot.default_price %>/hour
        <hr>
      <% end %>
    </div>

    <div class="col-sm-5">
    <div class="row">
    <h3>Filter by location</h3>
      <div class="col-lg-6">
        <div class="input-group">
          <input id="parkingspotsearch" type="text" class="form-control" placeholder="Search for...">
          <span class="input-group-btn">
            <button id="parkingspotsearchbutton" class="btn btn-default" type="button">Go!</button>
          </span>
        </div>
      </div>
    </div>
    <h3>Filter by time</h3>
        <div class='col-sm-5'>
            <div class="form-group">
                <div class='input-group date' id='starttime'>
                    <input type='text' class="form-control" />
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                </div>
            </div>
        </div>
        <div class='col-sm-5'>
            <div class="form-group">
                <div class='input-group date' id='endtime'>
                    <input type='text' class="form-control" />
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                </div>
            </div>
        </div>
    <div id="map" style='width: 600px; height: 400px;'></div>
    </div>
  <% else %>
    <h2>No parking spots listed</h2>
  <% end %>
</div>
<script>
  handler = Gmaps.build('Google');
  handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
    markers = handler.addMarkers(<%=raw @markers_hash.to_json %>);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
  });
</script>
