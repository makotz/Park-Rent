<h1><%= @parkingspot.title %></h1>
<h3>Owned by <%= @parkingspot.user.full_name %></h3>
<% if user_signed_in? && parkingspot_owner? %>
  <%= link_to "Edit Parkingspot", edit_user_parkingspot_path(current_user, @parkingspot) %>
  <%= link_to "Delete Parkingspot", user_parkingspot_path(current_user, @parkingspot), method: :delete %>
<% end %>
<h3>Details: <%= @parkingspot.description %></h3>

<% if @parkingspot.user != current_user %>
<h3>Rent for a given time</h3>
  <%= simple_form_for(@rental, url: parkingspot_rentals_path(@parkingspot)) do |f| %>
  <%= f.input :start %>
  <%= f.input :end %>
  <%= f.button :submit, class: "btn btn-primary" %>
  <% end %>
<% end %>

<%= render "calendar" %>

<div id="map" style='width: 800px; height: 400px;'></div>

<script>
  handler = Gmaps.build('Google');
  handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
    markers = handler.addMarkers([
      {
        "lat": <%= @parkingspot.latitude %>,
        "lng": <%= @parkingspot.longitude %>,
        "infowindow": "<%= @parkingspot.title %>"
      }
    ]);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
  });
</script>

<script>
  $('#calendar').click(function(){
    console.log("Hello");
  });
</script>
